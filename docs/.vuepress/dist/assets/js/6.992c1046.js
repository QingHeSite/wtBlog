(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{359:function(s,t,a){s.exports=a.p+"assets/img/exec_settimeout.075f992d.jpg"},386:function(s,t,a){"use strict";a.r(t);var n=a(25),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"深入浅出node-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#深入浅出node-js"}},[s._v("#")]),s._v(" 深入浅出node.js")]),s._v(" "),n("h3",{attrs:{id:"发布-npm包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#发布-npm包"}},[s._v("#")]),s._v(" 发布 npm包")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("创建"),n("code",[s._v("hello.js")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("exports"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("sayHello")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hello world'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("初始化描述文件 "),n("code",[s._v("npm init")]),s._v(", npm 通过提问交互填写选项,完成描述文件")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello_package"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"description"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"main"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello.js"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo \\"Error: no test specified\\" && exit 1"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"author"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"license"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ISC"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("注册包仓库账号")]),s._v(" "),n("ul",[n("li",[s._v("npm adduser\n依次填写账号,邮箱")])])]),s._v(" "),n("li",[n("p",[s._v("发布包 "),n("code",[s._v("npm publish .")])]),s._v(" "),n("ul",[n("li",[s._v("推送带tag的版本 "),n("code",[s._v("npm publish --tag [tagName]")]),s._v(" "),n("ul",[n("li",[s._v("安装带tag的版本 "),n("code",[s._v("npm install [package]@[tagName]")])])])]),s._v(" "),n("li",[s._v("如果预设了私有仓库(一般企业中会用到),包将直接发布到私有仓库,否则才发布到公共仓库")]),s._v(" "),n("li",[s._v("搭建"),n("a",{attrs:{href:"https://verdaccio.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("搭建私有仓库"),n("OutboundLink")],1),s._v(", 可使用"),n("code",[s._v("verdaccio")])]),s._v(" "),n("li",[n("strong",[s._v("注:")]),s._v(" 每次推送后,version需要+1进行修改")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npm notice \nnpm notice package: hello_package@1.0.1\nnpm notice === Tarball Contents ===    \nnpm notice 60B  hello.js    \nnpm notice 209B package.json\nnpm notice === Tarball Details ===     \nnpm notice name:          hello_package\nnpm notice version:       1.0.1\nnpm notice package size:  319 B\nnpm notice unpacked size: 269 B\nnpm notice shasum:        7dc90ee0e23ebb095a60a9192e8601e9ceeb5709\nnpm notice integrity:     sha512-ViQmd+Be+nDsz[...]aR4T3uRENReGg==\nnpm notice total files:   2\nnpm notice\n+ hello_package@1.0.1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h3",{attrs:{id:"使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[s._v("#")]),s._v(" 使用")]),s._v(" "),n("blockquote",[n("p",[n("strong",[s._v("process")]),s._v(" 获取当前进程信息")])]),s._v(" "),n("blockquote",[n("p",[n("strong",[s._v("platform")]),s._v(" 获取当前平台信息,区分系统. (windows > win32, mac > darwin)")])]),s._v(" "),n("blockquote",[n("p",[n("strong",[s._v("argv")]),s._v(" 用户传入的参数")])]),s._v(" "),n("blockquote",[n("p",[n("strong",[s._v("cwd")]),s._v(" 当前执行的所处路径")])]),s._v(" "),n("h3",{attrs:{id:"事件循环"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#事件循环"}},[s._v("#")]),s._v(" 事件循环")]),s._v(" "),n("p",[n("code",[s._v("在进程启动时，Node便会创建一个类似于while(true)的循环，每执行一次循环体的过程我们称为Tick。每个Tick的过程就是查看是否有事件待处理，如果有，就取出事件及其相关的回调函数。如果存在关联的回调函数，就执行它们。然后进入下个循环，如果不再有事件处理，就退出进程。")])]),s._v(" "),n("h3",{attrs:{id:"观察者"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#观察者"}},[s._v("#")]),s._v(" 观察者")]),s._v(" "),n("p",[n("code",[s._v("每个事件循环中有一个或者多个观察者，而判断是否有事件要处理的过程就是向这些观察者询问是否有要处理的事件。")])]),s._v(" "),n("h3",{attrs:{id:"定时器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#定时器"}},[s._v("#")]),s._v(" 定时器")]),s._v(" "),n("p",[s._v("setTimeout()和setInterval()与浏览器中的API是一致的,实现原理与异步I/O比较类似,只是不需要I/O线程池的参与.调用setIimeout()或者setInterval()"),n("strong",[s._v("创建的定时器会被插入到定时器观察者内部的一个红黑树中")]),s._v(".每次Tick执行时,会从该红黑树中迭代取出定时器对象,检查是否超过定时时间,如果超过,就形成一个事件,它的回调函数将立即执行.")]),s._v(" "),n("blockquote",[n("p",[s._v("以下为setTimeout执行流程(来源: 深入浅出node.js)")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(359),alt:"setTimeout执行流程"}}),s._v("\n需要注意的是,定时器的"),n("strong",[s._v("执行间隔并非精确")]),s._v(",举个栗子,譬如通过setTimeout()设定一个任务在10毫秒后执行，但是在9毫秒后，有一个任务占用了5毫秒的CPU时间片，再次轮到定时器执行时，时间就已经过期4毫秒。")])])]),s._v(" "),n("h3",{attrs:{id:"内存"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#内存"}},[s._v("#")]),s._v(" 内存")]),s._v(" "),n("p",[s._v("v8引擎的内存由"),n("code",[s._v("新生代内存")]),s._v("和"),n("code",[s._v("老生代内存")]),s._v("组成,在不同的系统下内存分配的大小不同,\n32位系统: 新生代 > 16MB, 老生代 > 700MB\n64位系统: 新生代 > 32MB, 老生代 > 1400MB")]),s._v(" "),n("p",[s._v("同时内存又分为"),n("code",[s._v("堆内内存")]),s._v("与"),n("code",[s._v("堆外内存")]),s._v(",老生代与新生代就属于堆内内存,像声明的变量就分配到堆内内存里了,"),n("code",[s._v("buffer")]),s._v("这种数据比较特殊,就分配到堆外内存了.")])])}),[],!1,null,null,null);t.default=e.exports}}]);